# MATLAB学习笔记

[TOC]

## 1.	MATLAB简介

MATLAB是美国[MathWorks](https://baike.baidu.com/item/MathWorks)公司出品的商业[数学软件](https://baike.baidu.com/item/数学软件)，用于[数据分析](https://baike.baidu.com/item/数据分析/6577123)、[无线通信](https://baike.baidu.com/item/无线通信/80254)、[深度学习](https://baike.baidu.com/item/深度学习/3729729)、[图像处理](https://baike.baidu.com/item/图像处理/294902)与[计算机视觉](https://baike.baidu.com/item/计算机视觉/2803351)、[信号处理](https://baike.baidu.com/item/信号处理/84717)、量化金融与风险管理、机器人，[控制系统](https://baike.baidu.com/item/控制系统/1051898)等领域。

MATLAB是matrix&laboratory两个词的[组合](https://baike.baidu.com/item/组合/1218690)，意为矩阵工厂（矩阵实验室），软件主要面对科学计算、可视化以及交互式程序设计的高科技计算环境。它将[数值分析](https://baike.baidu.com/item/数值分析/20159733)、[矩阵计算](https://baike.baidu.com/item/矩阵计算/8089413)、科学数据可视化以及非[线性](https://baike.baidu.com/item/线性)动态系统的[建模](https://baike.baidu.com/item/建模/814831)和仿真等诸多强大功能集成在一个易于使用的视窗环境中，为科学研究、工程设计以及必须进行有效数值计算的众多科学领域提供了一种全面的解决方案，并在很大程度上摆脱了传统非交互式[程序设计语言](https://baike.baidu.com/item/程序设计语言/2317999)（如C、Fortran）的编辑模式。

MATLAB和[Mathematica](https://baike.baidu.com/item/Mathematica)、[Maple](https://baike.baidu.com/item/Maple/2306572)并称为三大数学软件。它在数学类科技应用软件中在数值计算方面首屈一指。行[矩阵](https://baike.baidu.com/item/矩阵)运算、绘制函数和数据、实现算法、创建用户界面、连接其他编程语言的程序等。MATLAB的基本数据单位是矩阵，它的[指令](https://baike.baidu.com/item/指令/3225201)[表达式](https://baike.baidu.com/item/表达式/7655228)与数学、工程中常用的形式十分相似，故用MATLAB来解算问题要比用C，[FORTRAN](https://baike.baidu.com/item/FORTRAN)等语言完成相同的事情简捷得多，并且MATLAB也吸收了像Maple等软件的优点，使MATLAB成为一个强大的[数学软件](https://baike.baidu.com/item/数学软件/3363734)。在新的版本中也加入了对[C](https://baike.baidu.com/item/C/7252092)，[FORTRAN](https://baike.baidu.com/item/FORTRAN)，[C++](https://baike.baidu.com/item/C%2B%2B)，[JAVA](https://baike.baidu.com/item/JAVA/85979)的支持。



## 2.	命令

### 2.1	输入命令

您可以通过在命令行窗口中 MATLAB 提示符 (`>>`) 后输入命令，然后按 **Enter** 键来执行命令。

除非另有指定，否则 MATLAB 会将计算结果存储在一个名为 `ans` 的变量中。

```matlab
>> 7 + 3
ans = 
    10
```

MATLAB 中的等号 (`=`) 是*赋值*运算符，这意味着等号右侧的表达式赋给左侧的变量。



**任务：**将 `3*5` 的计算结果赋给一个名为 `m` 的变量，如下所示：

```matlab
m = 3*5
```

```matlab
>>m = 3*5
m =
    15
```



当您输入 `x = 3 + 4` 时，MATLAB 首先计算 `3 + 4`，然后将结果 (`7`) 赋给变量 `x`。



**任务：**输入命令 `m = m + 1`，看看会出现什么。

```matlab
>>m = m + 1
m = 
   16
```



请注意，**工作区**窗口（右侧）显示了当前位于工作区中的所有变量。



**任务：**创建一个名为 `y` 并且值为 `m/2` 的变量。

```matlab
>>y = m / 2
y = 
   8
```

 

**在命令的末尾添加分号将抑制输出，但仍会执行该命令，正如您在工作区中所看到的。当您输入命令而没有以分号结尾时，MATLAB 将会在命令提示符下显示结果。**

```matlab
>> x = 5 + 1
x = 
    6
    
>> x = 5 + 1;
```



**任务：**输入 `k = 8 - 2;`，结尾用分号。

结果不会出现在命令提示符下，但您可以在工作区窗口中看到该值。

```matlab
>>k = 8 - 2;
```

![image-20201226102836075](C:\Users\zhangnuanxin\AppData\Roaming\Typora\typora-user-images\image-20201226102836075.png)



**您可以按键盘上的向上箭头键重新调用以前的命令。请注意，要执行此操作，命令行窗口必须为活动窗口。**



**任务：**按向上箭头键以回到命令 `m = 3*5`，然后将该命令编辑为 `m = 3*k`

```matlab
>>m = 3 * k
m = 
   18
```



**当您在命令提示符下仅输入变量名称时，MATLAB 将会返回该变量的当前值。**



**任务：**`y` 的值是使用 `m` 计算的。修改 `m` 时，是否重新计算 `y`？

在命令提示符下只输入变量名称 `y`（并按 **Enter**）。

```matlab
>> y
y = 
   8
```



`y` 的值保持不变，因为 MATLAB 不会在命令行窗口中重新运行以前的命令。

如果您要在修改 `m` 后重新计算 `y`，需要重复命令 `y = m/2`。



**任务：**现在就试一下！使用向上箭头重新调用命令 `y = m/2`，然后按 Enter 键。切记，要查看 `y` 的新值，请不要在命令末尾使用分号。

```matlab
>>y = m/2
y =
   9
```



### 2.2	命名变量



您可以将 MATLAB 变量命名为符合以下规则的任何名称：以字母**开头**，并且仅包含字母、数字和下划线 (`_`)。

**MATLAB 变量还区分大小写。**



**任务：**将值 -2 赋给变量 `A`。

```matlab
>>A = -2
A =
   -2
```



请注意，变量 a 和 A 都存在于工作区中。
您可以将您的所有变量命名为 a 或 x，但对变量进行更有意义的命名会更有用。



**任务：**计算 (a+A)/2。将结果赋给变量`avgAa`。

```matlab
>>avgAa = (a+A)/2
avgAa = 
      3
```



如果您使用无效的变量名称，MATLAB 会显示建议的更正内容。您可以使用建议的命令、对其进行修改或按 Esc 键删除建议。



**任务：**试着创建变量 `3sq = 9` 来试验一下这些操作。

```matlab
>>3sq = 9
 3sq = 9
  ↑
  Error: Invalid expression. Check for missing multiplication operator, missing or unbalanced delimiters, or other syntax error. To construct matrices, use brackets instead of parentheses.
 是不是想输入:
>>sq = 9
```



### 2.3	保存和加载变量




您可以使用 `save` 命令将工作区中的变量保存到称为 MAT 文件的 MATLAB 特定格式文件中。

要将工作区保存到名为 `foo.mat` 的 MAT 文件中，请使用命令：

```matlab
>> save foo
```



**任务：** 将工作区变量保存到名为 `datafile.mat` 的文件中。

```matlab
>>save datafile
```



当您要在 MATLAB 中切换处理新问题时，可能需要整理工作区。您可以使用 clear 函数从工作区中删除所有变量。



**任务：**使用` clear`将工作区清空。

```matlab
>>clear
```



在工作区中，您可以看到 clear 命令清空了所有变量。
您可以使用 load 命令从 MAT 文件加载变量。

```matlab
>> load foo
```



**任务：**从文件`datafile.mat`加载变量。

```matlab
>>load datafile
```

请注意，变量 data 在工作区中列出。您可以通过输入变量的名称来查看任何变量的内容。
```matlab
>> myvar
```



**任务：**显示变量 `data` 的内容。

```matlab
>>data
```



clear 函数清理工作区。clc 命令清理命令行窗口。



**任务**
使用 `clc`命令清空命令行窗口。

```matlab
>>clc
```

**附加任务：**当您关闭 MATLAB 时，工作区将被清空。可以使用 MAT 文件来保存变量。这样，当您重新打开 MATLAB 时，可以将变量加载到工作区中。

如果您只想加载或保存部分变量，可以使用函数的两个输入。尝试从文件 myData.mat 中仅加载变量 m：
`>> load myData m`

然后尝试将变量 m 保存到名为 justm.mat 的新 MAT 文件中：
`>> save justm m`



### 2.4	使用内置的函数和常量

MATLAB 包含一些内置的常量，例如用 `pi` 表示 *π*。

```matlab
>> a = pi
a = 
    3.1416
```

这里虽然只对 *π* 显示了四位小数，但它在内部是用更高的精度表示的。



**任务：**创建一个名为 `x` 的变量，其值为 *π*/2。

```matlab
>>x = pi/2
x = 
   1.5708
```



MATLAB 包含许多内置的函数，例如 `abs`（计算绝对值）和 `eig`（计算特征值）。

```matlab
>> a = sin(-5)
a = 
    0.9589
```

请注意，MATLAB 使用圆括号来传递函数输入，与标准的数学表示法类似。



**任务:**使用 `sin` 函数计算 `x` 的正弦值。将结果赋给一个名为 `y` 的变量。

```matlab
>>y = sin(x)
y = 
    1
```



**任务:**使用 `sqrt` 函数计算 `-9` 的平方根。将结果赋给一个名为 `z` 的变量。

```matlab
>>z = sqrt(-9)
z = 
   0.0000 + 3.0000i
```



**附加练习：**

请注意，解包含虚数 `i`，这是 MATLAB 中的内置常量。

在命令行窗口中仅显示前四个小数位。您可以使用 `format` 函数控制显示的精度。

请试着输入 `format long` 并显示 `x` 的值。

输入 `format short` 可切换回默认显示。



## 3.	MATLAB桌面和编辑器



### 3.1	MATLAB桌面和编辑器

MATLAB默认桌面包括三个主窗口：命令行窗口、工作区和当前文件夹。



### 3.2	MATLAB编辑器

您可以通过点击灰色代码框在脚本中输入命令。



**任务：**在脚本中输入命令 `r = 3`。



当您在实时编辑器中完成任务时，命令行窗口和工作区会最小化。

您仍可以通过点击它们的名称来访问它们。

通过点击最右侧的`工作区`，尝试查看工作区中的变量 `x` 和 `r`。



### 3.3	运行脚本

此实时脚本包含格式化文本、代码和分节符。在本课程中，脚本将包括**任务**标题，以指示您应在哪里输入代码。



**任务：**

运行脚本以在输出窗格中显示运行结果。

然后修改**任务 1** 的命令，使 `r` 的值为 `0.5`。



要只执行一个节的代码，您可以点击 MATLAB 工具条中的**运行节**按钮。

请试着更改 `r` 的值，并**仅**运行该节。输出窗格中 `r` 的值会发生了怎样的变化？`x` 的值如何？

您也可以使用工具条中的按钮来创建新的节。尝试创建包含 `y = 2*pi*r` 的新的节。



## 4.	向量和矩阵



### 4.0	什么是数组？

所有 MATLAB 变量均为*数组*。这意味着每个变量都可以包含多个元素。您可以使用数组将相关数据存储在一个变量中。

由于您每次编程都会使用数组，因此了解数组以及用于说明数组的术语非常重要。



### 4.1	手动输入数组



单个称为标量的数值实际上是一个 1×1 数组，也即它包含 1 行 1 列。



**任务：**

创建一个名为 `x` 并且值为 4 的变量。

```matlab
>>x = 4
```



您可以使用方括号创建包含多个元素的数组。

```matlab
x = [3 5]
x = 
    3    5
```



**任务:**

创建一个名为 `x` 的数组，其中包含两个元素：`7` 和 `9`

```matlab
>>x = [7 9]
```



当您用空格（或逗号）分隔数值时（如前面的任务中所示），MATLAB 会将这些数值组合为一个*行向量*，行向量是一个包含一行多列的数组 (1×*n*)。当您用分号分隔数值时，MATLAB 会创建一个*列向量* (*n*×1)。

```matlab
x = [1;3]
x = 
    1
    3
```



**任务**

创建一个名为 `x` 的数组，其中包含两个元素 `7` 和 `9`，且两个元素位于同一**列**中。

试着复制以前的命令，并将数值之间的空格改为分号 (`;`)。

```matlab 
>>x = [7;9]
```



**任务**

创建一个名为 `x` 的行向量，其中依次包含值 `3`、`10` 和 `5`。

```matlab
>>x = [3 10 5]
```



**任务**

创建一个名为 `x` 的列向量，其中依次包含值 `8`、`2` 和 `-4`。

```matlab
>>x = [8;2;-4]
```



您可以组合使用空格和分号来创建一个*矩阵*，即包含多行多列的数组。输入矩阵时，您必须逐行输入它们。

```matlab
x = [3 4 5;6 7 8]
x = 
    3    4    5
    6    7    8
```



**任务**

创建一个名为 `x` 的矩阵，其中包含的值如下所示。

```matlab
5    6    7
8    9   10
```

```matlab
>>x = [5 6 7;8 9 10]
```



在 MATLAB 中，您可以在方括号内执行计算。

```matlab
x = [abs(-4) 4^2]
x = 
     4    16
```



**任务**

创建一个名为 `x` 的行向量，其中第一个元素为 `sqrt(10)`，第二个元素为 `pi^2` (*π*2

)。

```matlab
>>x = [sqrt(10) pi^2]
```



数组在 MATLAB 中的使用非常普遍。事实上，MATLAB 是 MATrix LABoratory 的缩写。您会发现大多数 MATLAB 功能可以同时处理多个值。

创建数组时有一定的灵活性。例如，可通过以下几种有效方法来创建同一数组：

```matlab
x = [7 9]
x=[7,9]
x = [7, 9]
```



试着用空格、逗号和分号来创建以下矩阵：

[7 1 8]

[4 5 8]

[10 4 2]

```matlab
x = [[7 1 8];[4 5 8];[10 4 2]]
x = [[7,1,8];[4,5,8];[10,4,2]]
```



### 4.2	创建等间距向量



对于长向量，输入单个数值是不实际的。可用来创建等间距向量的替代便捷方法是使用 `:` 运算符并仅指定起始值和最终值。

```matlab
y = 5:8
y = 
    5    6    7    8
```

请注意，当您使用冒号运算符时，不需要方括号。



**任务**

创建一个名为 `x` 的行向量（包含值 1、2、3 和 4），但这次使用 `:` 运算符。

```matlab
x = 1:4
```



`:` 运算符使用默认的间距 `1`，但是您可以指定您自己的间距，如下所示。

```matlab
x = 20:2:26
x = 
    20    22    24    26
```



**任务**

创建一个名为 `x` 的行向量，该向量以 `1` 开头，以 `5` 结尾，每个元素的间距为 `0.5`。

```matlab
x = 1:0.5:5
```



如果您知道向量中所需的元素数目（而不是每个元素之间的间距），则可以改用 `linspace` 函数：

```matlab
linspace(first,last,number_of_elements)
```

注意，请使用逗号 (`,`) 分隔 `linspace` 函数的输入。

```matlab
x = linspace(0,1,5)
x = 
    0    0.250    0.500    0.750    1.000
```



**任务**

创建一个名为 `x` 的行向量，该向量以 `1` 开头，以 `10` 结尾，共包含 `5` 个元素。

```matlab
x = linspace(1,10,5)
```



`linspace` 和 `:` 运算符都可创建行向量。但是，您可以使用转置运算符 (`'`) 将行向量转换为列向量。

```matlab
x = 1:3;
x = x'
x = 
    1
    2
    3
```



**任务**

使用转置运算符将 `x` 从行向量转置为列向量。

```matlab
x = x'
```



您可以通过在一条命令中创建行向量并将其全部转置来创建列向量。注意此处使用圆括号来指定运算的顺序。

```matlab
x = (1:2:5)'
x = 
    1
    3
    5
```



**任务**

在一条命令中，创建一个名为 `x` 的列向量，该向量以 `5` 开头，以 `9` 结尾，并且元素之间的间隔为 `2`。

```matlab

```



请注意，如果您使用 `linspace` 或 `:` 创建向量，则不需要使用方括号 (`[]`)。

如果您要创建从 1 到 2*π* 的等间距向量，其中包含 100 个元素，您会使用 `linspace` 还是 `:`？

linspace



4.3	数组创建函数



MATLAB 包含许多函数，可帮助您创建常用的矩阵，例如随机数矩阵。

```matlab
x = rand(2)
x = 
    0.8147    0.1270
    0.9058    0.9134
```


请注意，`rand(2)` 命令中的 `2` 指定输出将为一个 2×2 的随机数矩阵。



**任务**

创建一个名为 `x` 的变量，该变量是一个 5×5 的随机数矩阵。

```matlab
x = rand(5)
```



许多矩阵创建函数允许您输入一个数值来创建方阵 (*n*×*n*)，或者输入两个数值来创建非方阵。

```matlab
x = rand(2)
x = 
    0.8147    0.1270
    0.9058    0.9134
```

```matlab
x = rand(2,3)
x = 
    0.6324    0.2785    0.9575
    0.0975    0.5469    0.9649
```



**任务**

使用 `rand` 创建一个包含 `5` 行 `1` 列的数组。将结果赋给名为 `x` 的变量。

```matlab
x = rand(5,1)
```



**任务**

使用 `zeros` 函数创建一个包含 `6` 行 `3` 列 (6×3) 的全零矩阵。将结果赋给名为 `x` 的变量。

```matlab
x = zeros(6,3)
```



如何知道现有矩阵的大小？您可以使用 `size` 函数。

```matlab
size(x)
```

您也可以使用一行代码创建与现有矩阵大小相同的矩阵。

```matlab
rand(size(x))
```



## 5.	索引和修改数组



### 5.1	对数组进行索引

MATLAB中所有变量都是一个数组。

第一个步骤是引用数组中的元素，这称为索引。

可以通过索引来提取和修改数组中的值

值在数组中的位置称之为它的索引

您可以使用索引提取特定值

比如

```matlab
x = [1:10]
x(3)
如果知道元素的位置，你可以修改它的值，例如
x(3) = 1
```

还可以提取某一范围的值

方法是使用冒号及该范围的第一个和最后一个索引

```matlab
x(2:5)
```



如果想从一个矩阵中提取元素，请改为指定两个索引

第一个索引是行号，第二个是列

```matlab
x(1,2)
```



矩阵中提取整行或者整列

单独使用冒号作为索引，它表示全部，全部的行或者全部的列

```matlab
x(1,:)   %提取矩阵的第一行
x(:,2)   %提取矩阵的第二列
```



索引可以用来做很多事情，但是最基础的格式是：

矩阵索引的形式为(行,列)：

```matlab
x(row,col)
```

向量只需要一个索引值

```matlab
x(idx)
```



**练习**



您可以使用行、列索引从数组中提取值。

```matlab
y = A(5,7)
```

此语法将会提取 `A` 的第 5 行第 7 列的值，然后将结果赋给变量 `y`。



**任务**

创建一个名为 `x` 的变量，其值为变量 `data` 中位于第 6 行第 3 列的值。

```matlab
x = data(6,3)
```



您可以使用 MATLAB 关键字 `end` 作为行或列索引来引用最后一个元素。

```matlab
y = A(end,2)
```



**任务**

使用 `end` 关键字获取变量 `data` 的最后一行第三列的值。将该值赋给一个名为 `x` 的变量。

```matlab
x = data(end,3)
```



请注意，您可以将算术运算与关键字 `end` 结合使用。例如：

```matlab
y = A(end-1,end-2)
```



**任务**

创建标量变量 `x`，其值为 `data` 的倒数第二 (`end-1`) 行第三列的值。

```matlab
x = data(end-1,3)
```



如果只对一个矩阵使用一种索引，它将按顺序从上到下遍历每列。试着用一种索引提取 `data` 的第八个元素。

您也可以使用变量作为索引。试着创建一个变量 `y`，并用 `y` 作为 `data` 的索引。

```matlab
y = data(8)
```



### 5.2	提取多个元素



用作索引时，冒号运算符 (`:`) 可指代该维度中的所有元素。以下语法

```matlab
x = A(2,:)
```

会创建一个包含 `A` 中第 2 行上所有元素的行向量。



**任务**

创建一个名为 `density` 的变量，其中包含名为 `data` 的矩阵中第 2 列上的所有元素。

```matlab
density = data(:,2)
```



冒号运算符可以引用某个值范围。以下语法会创建一个包含矩阵 `A` 的第 1 行、第 2 行和第 3 行所有元素的矩阵。

```matlab
x = A(1:3,:)
```



**任务**

创建一个名为 `volumes` 的变量，其中包含 `data` 的最后两列的所有元素。

```matlab
volumes = data(:,end-1:end)
```



单个索引值可用于引用向量元素。例如

```matlab
x = v(3)
```

会返回向量 `v` 的第 3 个元素（当 `v` 为行向量或列向量时）。



**任务**

使用单个索引值创建一个名为 `p` 并且包含向量 `density` 中的第 6 个元素的变量。

```matlab
p = density(6)
```



单个索引值范围可用于引用向量元素的子集。例如

```matlab
x = v(3:end)
```


返回向量 `v` 的一个子集，其中包含从第三个到最后一个元素范围内的所有元素。



**任务**

使用索引值范围创建一个名为 `p` 的向量，其中包含从 `density` 的第 2 个到第 5 个元素范围内的所有元素。

```matlab
p = density(2:5)
```



### 5.3	更改数组中的值



记住您可以使用 `:` 字符来提取整列数据。



**任务**

创建一个名为 `v2` 并且包含 `data` 的最后一列元素的向量。

```matlab
v2 = data(:,end)
```



可以结合使用索引和赋值来修改变量的元素。
`A(2) = 11`



**任务**

将 `v2` 中的第一个元素从 `NaN` 更改为 `0.5`。

```matlab
v2(1) = 0.5
```



![img](https://matlabacademy-content.mathworks.com/4.23/R2020b/cn/content/Syntax/Indexing/Changing%20Values%20in%20Arrays/matrix.png)



**任务**

将 `data` 的第一行和最后一列中元素的值更改为 `0.5`。

```matlab
data(1,end) = 0.5
```



您可以结合使用索引与赋值，将数组值更改为与其他元素相等。例如，以下代码将 `x(1)` 的值更改为 `x(2)` 的值：

```matlab
x(1) = x(2)
```

尝试将 `data` 的第一列更改为 `data` 的第二列。

```matlab
data(:,1) = data(:,2)
```



## 6.	数组计算



### 6.1	对向量执行数组计算



MATLAB 的设计让您能够自然地处理数组。例如，您可以将一个标量值与数组中的所有元素相加。

```matlab
y = x + 2
```



**任务**

将 `1` 与 `v1` 的每个元素相加，然后将结果存储在名为 `r` 的变量中。

```matlab
r = v1 + 1
```



可以将任意两个大小相同的数组相加。

```matlab
z = x + y
```



**任务**

创建一个向量 `vs`，它是向量 `v1` 和 `v2` 的和。

```matlab
vs = v1 + v2
```



您可以将数组中的所有元素与某个标量相乘或相除。

```matlab
z = 2*x
y = x/3
```



**任务**

创建一个变量 `va`，其值为 `vs`/`2`（平均体积）。

```matlab
va = vs/2
```



MATLAB 中的基本统计函数可应用于某个向量以生成单个输出。可以使用 `max` 函数来确定向量的最大值。

```matlab
xMax = max(x)
```



**任务**

创建一个变量 `vm`，其值为 `va` 向量的最大值。

```matlab
vm = max(va)
```



MATLAB 的函数可在单个命令中对整个向量或值数组执行数学运算。

```matlab
xSqrt = sqrt(x)
```



**任务**

使用 `round` 函数创建一个名为 `vr` 的变量，其中包含四舍五入为整数的平均体积 `va`。

```matlab
vr = round(va)
```

`round`函数

函数功能：四舍五入取整。

使用方法：B = round(A)

对数组A中每个元素朝最近的方向取整数部分，并返回与A同维的整数数组B，对于一个复数参量A，则分别对其实部和虚数朝最近的方向取整数部分，并返回一复数数据B。



`*` 运算符执行[矩阵乘法](http://www.mathworks.com/help/matlab/ref/mtimes.html)。因此，如果您使用 `*` 将两个大小相同的向量相乘，则由于内部维度不一致，您将会收到一条错误消息。

```matlab
z = [3 4] * [10 20]
```



```matlab
错误使用  * 
用于矩阵乘法的维度不正确。 
```



而 `.*` 运算符执行按元素乘法，允许您将两个大小相同的数组的对应元素相乘。

```matlab
z = [3 4] .* [10 20]
```



```matlab
z = 
    30    80
```



**任务**

创建一个名为 `mass` 的变量，其中包含 `density` 和 `va` 的按元素乘积。

```matlab
mass = density .* va
```



## 7.	调用函数



### 7.1	获取函数的多个输出



`size` 函数可以应用于数组，以生成包含数组大小的单个输出变量。

```matlab
s = size(x)
```



**任务**

创建一个名为 `dsize` 的变量，其值为 `data` 变量的大小。

```matlab
dsize = size(data)
```



`size` 函数可以应用于矩阵，以生成单个输出变量或两个输出变量。使用方括号 (`[ ]`) 获得多个输出。

```matlab
[xrow,xcol] = size(x)
```



**任务**

创建变量 `dr` 和 `dc`，其中分别包含变量 `data` 的行数和列数。

```matlab
[dr,dc] = size(data)
```



可以使用 `max` 函数确定向量的最大值及其对应的索引值。`max` 函数的第一个输出为输入向量的最大值。执行带两个输出的调用时，第二个输出为索引值。

```matlab
[xMax,idx] = max(x)
```



**任务**

创建变量 `vMax` 和 `ivMax`，其中分别包含 `v2` 向量的最大值和对应的索引值。

```matlab
[vMax,ivMax] = max(v2)
```



如果只需函数的第二个输出，可以使用波浪号字符 (`~`) 忽略特定输出。

例如，您可能只需要包含向量中最大值的索引：

```matlab
density = data(:,2)
[~,ivMax] = max(v2)
densityMax = density(ivMax)
```

试着获取 `v2` 中最小值的索引值。使用此索引从 `density` 中提取值。

```matlab
[~,x] = min(v2)
```



## 8.	获取帮助



MATLAB中有帮助文档，包含MATLAB的函数功能等等

可以通过帮助文档界面的搜索按钮搜索需要的函数功能或说明等等



MATLAB 文档包含有用的示例和信息，可帮助您自行处理问题。



**任务**

参考 [`randi`](http://www.mathworks.com/help/matlab/ref/randi.html) 的文档以完成以下任务。

创建一个名为 `x` 的矩阵，

- 其中包含 `1` 到 `20` 范围的随机整数
- 行数为 5
- 列数为 7

```matlab
x = randi([1,20],5,7)
```



## 9.	绘制数据图



### 9.1	绘制相量图

可以使用 `plot` 函数在一张图上绘制两个相同长度的向量。

```matlab
plot(x,y)
```

**任务**

创建一个绘图，其中 `sample` 位于 x 轴，`mass1` 位于 y 轴。

```python
plot(sample,mass1)
```



`plot` 函数接受一个附加参数。使用该参数，您可以通过在引号中包含不同符号的方式来指定与之对应的颜色、线型和标记样式。

```matlab
plot(x,y,"r--o")
```

以上命令将会绘制一条红色 (`r`) 虚线 (`--`)，并使用圆圈 (`o`) 作为标记。您可以在[线条设定](http://www.mathworks.com/help/matlab/ref/linespec.html)的文档中了解有关可用符号的详细信息。



**任务**

绘制 `mass2`（*y 轴*）对 `sample`（*x 轴*）的图。在绘图中使用红色 (`r`) 星号 (`*`) 标记，并且不使用线条。

```matlab
plot(sample,mass2,"r*")
```



**plot函数详解**



1.plot默认格式

 plot(x,y)这种格式中，若x,y是向量，则它们必须具有相同的长度。函数将以x为横轴，绘制y。

若x,y都是矩阵，则它们必须具有相同的尺寸，plot函数将针对x的各列绘制y的每列。更确切的说，将x和y的对应的各列取出来，绘制曲线。比如x和y分别为n*n的矩阵，则plot函数将x的第1列和y的第1列对应取出来，绘制一条曲线，然后将x的第二列与y的第二列对应起来，绘制一条曲线，如此下去直到第n条匹配绘制完成。

若x和y之一为向量，另一个为矩阵，则矩阵必须有一维与向量的长度相等。如果矩阵的行数等于向量的长度，则针对向量绘制矩阵的每列；如果矩阵的列数等于向量长度，则针对向量绘制矩阵的每行；若矩阵为方阵，则针对向量绘制矩阵的每列。

若x和y之一为标量，另一个为标量或者向量，则绘制离散的点；然而想要看到绘制的点，用户必须指定表示点位的记号。



2.plot属性应用

带属性的格式中。增加了线属性的设置，这些属性包括线型设置，绘制线条时是否使用标记符号以及使用什么样的标记符号，线条的颜色、粗细等等。

在plot函数中，无论是线型、标记符号还是颜色，具体制定时，都是以字符串的形式出现。字符串中的颜色可以以任何顺序出现，用户也可以省略其中的一个或多个选项。如果用户省略了线条样式，但制定了标记字符，则plot函数只显示标记符，但不会显示线条。

 

plot函数在绘制线条时，线条属性主要包括三个方面，一是线型的使用。



| 符号 | 含义   | 符号 | 含义   | 符号 | 含义   | 符号 | 含义   |
| :--- | :----- | :--- | :----- | :--- | :----- | :--- | :----- |
| -    | 细实线 | ：   | 虚点线 | -.   | 点画线 | --   | 虚画线 |

 

二是颜色的使用，其中最常用的颜色如下所示，更多的颜色可以采用RGB来表示。



| 符号 | 含义 | 符号 | 含义 | 符号 | 含义 | 符号 | 含义 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| r    | 红   | b    | 蓝   | y    | 黄   | w    | 白   |
| g    | 绿   | c    | 青   | k    | 黑   | m    | 品红 |



 三是标志符的应用，它可以更有效的显示出数据点的位置。



| 符号 | 含义     | 符号 | 含义     | 符号 | 含义     | 符号 | 含义   |
| :--- | :------- | :--- | :------- | :--- | :------- | :--- | :----- |
| .    | 实心点   | <    | 朝左三角 | d    | 菱形     | p    | 五角星 |
| +    | 十字号   | >    | 朝右三角 | h    | 六角星   | s    | 方块   |
| *    | 星号     | v    | 朝下三角 | o    | 空心圆圈 | x    | 叉字符 |
| ^    | 朝上三角 |      |          |      |          |      |        |



 matlab对plot函数中线条属性的修改，提供了属性名称和属性值的设置方法。



| 属性名称        | 含义               | 属性值                         | 备注                                                      |
| :-------------- | :----------------- | :----------------------------- | :-------------------------------------------------------- |
| Color           | 设置线条或点的颜色 | [r,g,b],各颜色强度介于0~1      | 常用颜色可使用色彩符号进行设置使用RGB颜色数据也可默认蓝色 |
| LineStyle       | 线型               | 细实线、虚点线、点画线、虚画线 | 通过线型符号设置默认细实线                                |
| LineWidth       | 线条宽度/粗细      | 正实数                         | 正版出版物使用1.4为宜默认为0.5                            |
| Marker          | 数据点标识符       | 菱形、空心圆圈等13种           | 通过标识符符号设置                                        |
| MarkerSize      | 标识符大小         | 正实数                         | 默认值为6.0                                               |
| MarkerEdgeColor | 标识符边界色彩     | [r,g,b],各颜色强度介于0~1      |                                                           |
| MarkerFaceColor | 标识符内部填充色彩 | [r,g,b],各颜色强度介于0~1      |                                                           |



3.其他几种格式

- plot(x1,y1,...,xn,yn)

   在这种格式中，将使用相同的坐标轴绘制多条曲线。

- plot(x1,y1,linespec1,...,xn,yn,linespecn)

​    这种格式允许用户对每条线进行属性设置

- plot(y)

​    这种格式中，只有数据y，plot将绘制二维的线条。具体来讲，针对y的每个数据，以数据的索引当做x与其值配对绘制曲线。如果y是向量，那么x轴的尺度范围从1到y的长度。如果y是矩阵，则绘制y的每列，列中数据对应的x，则取各值对应的行号。若y是复数，则复数的实部设定为x，虚部设定为y。

- ploy(y,linespec)

​    统一设定各线条的属性。

- plot(ax,______)

​    这种格式不是在当前的轴框绘图，而是在由句柄ax指定的轴框内绘图，这种格式允许用户对特定绘图对象进行属性设置。

- h=plot(______)

   这种格式返回由图中各线条的句柄构成的列向量h，即h中的每个元素就是图中一条线的句柄，当绘制多条线时，用户可通过某条线的句柄对该线进行特定的修改。





请注意，每个绘图命令都创建了一个单独的绘图。要在一张图上先后绘制两条线，请使用 `hold on` 命令保留之前的绘图，然后添加另一条线。



**任务**

输入 `hold on` 命令。

然后绘制 `mass1`（*y 轴*）对 `sample`（*x 轴*）的图，并带有黑色 (`k`) 方形 (`s`) 标记，不带线条。

```matlab
hold on
plot(sample,mass1,"ks")
```



启用保留状态时，将继续在同一坐标区上绘图。要恢复默认绘图行为，即其中每个绘图都有自己的坐标区，请输入 `hold off`。



**任务**

输入 `hold off` 命令。

```matlab
hold off
```



当您单独绘制一个向量时，MATLAB 会使用向量值作为 y 轴数据，并将 x 轴数据的范围设置为从 `1` 到 `n`（向量中的元素数目）。



**任务**

使用以下命令绘制向量 `v1`。

```matlab
plot(v1)
```



`plot` 函数接受可选的附加输入，这些输入由一个属性名称和一个关联的值组成。

```matlab
plot(y,"LineWidth",5)
```


以上命令将绘制一条粗线。您可以在[线条属性](https://www.mathworks.com/help/matlab/ref/matlab.graphics.chart.primitive.line-properties.html)文档中了解更多可用属性的详细信息。



**任务**

绘制 `v1`，线宽为 `3`。

```matlab
plot(v1,"LineWidth",3)
```



使用 `plot` 函数时，您可在绘图参数和线条设定符之后添加属性名称-属性值对组。

```matlab
plot(x,y,"ro-","LineWidth",5)
```



**任务**

绘制 `v1`（*y 轴*）对 `sample`（*x 轴*）的图，使用红色 (`r`) 圆圈 (`o`) 标记，线宽为 `4`。

```matlab
plot(sample,v1,"ro-","LineWidth",4)
```



### 9.2	编写绘图注释



可以使用绘图注释函数（例如 `title`）在绘图中添加标签。此类函数的输入是一个字符串。MATLAB 中的字符串是用双引号 (`"`) 引起来的。

```matlab
title("Plot Title")
```



**任务**

为现有绘图添加标题 `"Sample Mass"`。

```matlab
title("Sample Mass")
```



**任务**

使用 `ylabel` 函数添加标签 `"Mass (g)"`。

```matlab
 ylabel("Mass (g)")
```



您可以使用 `legend` 函数为绘图添加图例。

```matlab
legend("a","b","c")
```



**任务**

创建一个图例，其中依次包含标签 `"Exp A"` 和 `"Exp B"`。

```matlab
legend("Exp A","Exp B")
```



您可以在绘图注释中使用变量的值，方法是将字符串与变量*串联*起来：

```matlab
bar(data(3,:))
title("Sample " + sample(3) + " Data")
```



## 10.	导入数据

### 10.1	以表的形式导入数据



要提取表变量，可以使用*圆点表示法*：

```matlab
data.VariableName
```



**任务**

将 `elements.Density` 的内容赋给名为 `d` 的列向量

```matlab
d = elements.Density
```



如果您正在使用表，您可能希望将相关数据放在一起。您可以将计算结果赋给表，而不是创建单独的变量。

```matlab
data.HeightMeters = data.HeightYards*0.9144
```


如果变量 *data.HeightMeters* 不存在，MATLAB 将在表中创建名为 `HeightMeters` 的新变量。



**任务**

将 `elements.Density` 的每个元素与 `elements.Volume1` 相乘。请使用 `.*`。

将结果赋给 `elements.Mass`。

```matlab
elements.Mass = elements.Density.*elements.Volume1
elements = sortrows(elements,"Mass")
```



您可以通过在实时脚本的输出窗格中点击表来与表进行交互。例如，您可以使用表的一个变量对表进行排序。
![img](https://matlabacademy-content.mathworks.com/4.23/R2020b/cn/content/Importing%20Data/Importing%20Data%20as%20a%20Table/images/sorttablesmall.jpg)
在您对表感到满意时，您可以通过更新代码使更改永久化。
![img](https://matlabacademy-content.mathworks.com/4.23/R2020b/cn/content/Importing%20Data/Importing%20Data%20as%20a%20Table/images/updatecodesmall.jpg)



**任务**

按从最小到最大质量对表进行排序。然后更新脚本中的代码，再点击**提交**。



圆点表示法用于提取表变量。要提取行，可以使用常规数组索引。

尝试提取表的前三行：

```matlab
top3 = elements(1:3,:)
```


请注意，`top3` 也是一个表。



## 11.	逻辑数组



### 11.1	逻辑索引



[关系运算符](https://www.mathworks.com/help/matlab/matlab_prog/array-comparison-with-relational-operators.html)（例如 `>`、`<`、`==` 和 `~=`）执行两个值之间的比较。相等或不相等比较的结果为 1 (true) 或 0 (false)。



**任务**

使用关系运算符 `<` 测试 *π* 是否小于 `4`。将输出赋给一个名为 `test` 的变量。

```matlab
test = pi<4
```



您可以使用关系运算符将某个向量或矩阵与单个标量值进行比较。结果是与原始数组相同大小的逻辑数组。

```matlab
[5 10 15] > 12
ans = 
    0    0    1
```



**任务**

测试向量 `v1` 中是否有小于 `4` 的元素。将输出赋给一个名为 `test` 的变量。

```matlab
test = v1 < 4
```



您可以使用逻辑数组作为数组索引，在这种情况下，MATLAB 会提取索引为 `true` 的数组元素。以下示例将会提取 `v1` 中大于 6 的所有元素。

```matlab
v = v1(v1 > 6)
v =
    6.6678
    9.0698
```



**任务**

创建一个名为 `v` 的变量，其中包含 `v1` 中所有小于 4 的元素。

```matlab
v = v1(v1 < 4)
```



您也可以对两个不同向量使用逻辑索引。

```matlab
v = sample(v1 > 6)
s =
    18
    23
```



**任务**

创建一个名为 `s` 的变量，其中包含 `sample` 中与 `v1` 中小于 `4` 的元素所在位置对应的元素。

```matlab
s = sample(v1 < 4)
```



您可以使用逻辑索引在数组中重新赋值。例如，如果您要将数组 `x` 中等于 `999` 的所有值都替换为值 `1`，请使用以下语法。

```matlab
x(x==999) = 1
```



**任务**

修改 `v1`，将其中任何小于 `4` 的值都替换为 `0`。

```matlab
v1(v1 < 4) = 0
```



您可以使用逻辑运算符 `and` (`&`) 以及 `or` (`|`) 来组合逻辑比较。

要查找小于 4 **且**大于 2 的值，请使用 `&`：

```matlab
x = v1(v1<4 & v1>2)
```



要查找大于 6 **或**小于 2 的值，请使用 `|`：

```matlab
x = v1(v1>6 | v1<2)
```



试着获取 `sample` 中介于 10 和 20 之间的值。

```matlab
x = sample(sample>=10 & sample<=20)
```



## 12.	编程

### 12.1	决策分支



仅当条件为 true 时，才执行 `if` 代码块的主体。
![img](https://matlabacademy-content.mathworks.com/4.23/R2020b/cn/content/Syntax/Programming%20constructs/Decision%20Branching/images/ifstatement.jpg)



**任务**

修改脚本，使第 4-7 行的绘图代码仅在 `doPlot` 为 `1` 时执行。

```matlab
if  doPlot == 1
    plot(density)
    title("Sample Densities")
    xticklabels(element)
    ylabel("Density (g/cm^3)")
end
```



通常，您可能还希望在所设条件不成立时执行其他代码。为此，您可以使用 `else` 关键字，如下所示。

```matlab
x = rand
if x > 0.5
    y = 3
else
    y = 4
end
```



**任务**

修改脚本，以便在 `if` 条件得不到满足时，执行以下代码行：

```matlab
disp("The density of " + element ...
    + " is " + density)
```



```matlab
if  doPlot == 1
    plot(density)
    title("Sample Densities")
    xticklabels(element)
    ylabel("Density (g/cm^3)")
else
    disp("The density of " + element + " is " + density)
end
```



### 12.2	for循环

运行以下代码时，循环体将被执行三次，因为循环计数器 (`c`) 通过 `1:3`（`1`、`2` 和 `3`）进行计数。

```matlab
for c = 1:3
	disp(c)
end
```



**任务**

将实时脚本第二节（第 4-7 行）中的代码放在一个循环中，以便代码执行 `7` 次。

将您的循环计数器命名为 `idx`。首次执行循环时，`idx` 的值应为 `1`，并且每次迭代时递增 `1`。

```matlab
for idx = 1:1:7
	hold on
	plot(idx,density(idx),'*')
	hold off
	pause(0.2)
end
```



您注意到绘图的动画效果了吗？代码 `pause(0.2)` 在 `0.2` 秒处停止循环，以便绘图进行更新。请尝试通过增大值 `0.2` 来增加动画时间。

该循环执行 `7` 次，因为 `density` 向量有七个元素。如果您要对未知长度的向量执行循环，可以改用 `length` 函数：

```matlab
for idx = 1:length(density)
```



# MATLAB摘要

## 基本语法

|                             示例                             |                             说明                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| [`x = pi`](https://www.mathworks.com/help/matlab/matlab_env/create-and-edit-variables.html) | 使用等号 (`=`) 创建变量。 左侧 (`x`) 是变量的名称，其值为右侧 (`pi`) 的值。 |
| [`y = sin(-5)`](https://www.mathworks.com/help/matlab/learn_matlab/calling-functions.html) |                您可以使用括号提供函数的输入。                |

 

## 桌面管理

|                             函数                             |      示例       |               说明                |
| :----------------------------------------------------------: | :-------------: | :-------------------------------: |
| [`save`](https://www.mathworks.com/help/matlab/ref/save.html) | `save data.mat` |  将当前工作区保存到 MAT 文件中。  |
| [`load`](https://www.mathworks.com/help/matlab/ref/load.html) | `load data.mat` | 将 MAT 文件中的变量加载到工作区。 |
| [`clear`](https://www.mathworks.com/help/matlab/ref/clear.html) |     `clear`     |     清除工作区中的所有变量。      |
| [`clc`](https://www.mathworks.com/help/matlab/ref/clc.html)  |      `clc`      |   清除命令行窗口中的所有文本。    |
| [`format`](https://www.mathworks.com/help/matlab/ref/format.html) |  `format long`  |     更改数值输出的显示方式。      |

 

## 数组类型

|      示例       |  说明  |
| :-------------: | :----: |
|       `4`       |  标量  |
|     `[3 5]`     | 行向量 |
|     `[1;3]`     | 列向量 |
| `[3 4 5;6 7 8]` |  矩阵  |

 

## 等间距向量

|        示例        |                             说明                             |
| :----------------: | :----------------------------------------------------------: |
|       `1:4`        | 使用[冒号 (`:`)](https://www.mathworks.com/help/matlab/ref/colon.html) 运算符，创建一个从 `1` 到 `4`，间距为 `1` 的向量。 |
|     `1:0.5:4`      |         创建一个从 `1` 到 `4`，间距为 `0.5` 的向量。         |
| `linspace(1,10,5)` | 创建一个包含 `5` 个元素的向量。这些值从 `1` 到 `10` 均匀间隔。 |

 

## 创建矩阵

|     示例     |                说明                |
| :----------: | :--------------------------------: |
|  `rand(2)`   |   创建一个 `2` 行 `2` 列的方阵。   |
| `zeros(2,3)` | 创建一个 `2` 行 `3` 列的矩形矩阵。 |

 

## 索引

|    示例     |                说明                 |
| :---------: | :---------------------------------: |
| `A(end,2)`  |   访问最后一行的第二列中的元素。    |
|  `A(2,:)`   |        访问第二行所有元素。         |
| `A(1:3,:)`  |        访问前三行的所有列。         |
| `A(2) = 11` | 将数组中第二个元素的值更改为 `11`。 |

 

## 数组运算

|                        示例                         |                             说明                             |
| :-------------------------------------------------: | :----------------------------------------------------------: |
| `[1 1; 1 1]*[2 2;2 2] ans =     4    4     4    4`  | 执行[矩阵乘法](https://www.mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html#btyv9yp-4)。 |
| `[1 1; 1 1].*[2 2;2 2] ans =     2    2     2    2` | 执行[按元素乘法](https://www.mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html#bu90xxy-1)。 |

 

## 多个输出

|          示例           |                   说明                    |
| :---------------------: | :---------------------------------------: |
| `[xrow,xcol] = size(x)` | 将 `x` 中的行数和列数保存为两个不同变量。 |
|  `[xMax,idx] = max(x)`  |    计算 `x` 的最大值及其对应的索引值。    |

 

## 文档

|    示例     |            说明             |
| :---------: | :-------------------------: |
| `doc randi` | 打开 `randi` 函数的文档页。 |

 

## 绘图

|              示例               |                             说明                             |
| :-----------------------------: | :----------------------------------------------------------: |
| `plot(x,y,"ro-","LineWidth",5)` | 绘制一条红色 (`r`) 虚线 (`--`) 并使用圆圈 (`o`) 标记，线宽很大。 |
|            `hold on`            |                    在现有绘图中新增一行。                    |
|           `hold off`            |              为下一个绘图线条创建一个新坐标区。              |
|       `title("My Title")`       |                       为绘图添加标签。                       |

 

## 使用表

|                     示例                      |                  说明                  |
| :-------------------------------------------: | :------------------------------------: |
|              `data.HeightYards`               | 从表 `data` 中提取变量 `HeightYards`。 |
| `data.HeightMeters = data.HeightYards*0.9144` |      从现有数据中派生一个表变量。      |

 

## 逻辑运算

|       示例       |                   说明                    |
| :--------------: | :---------------------------------------: |
| `[5 10 15] > 12` |        将向量与值 `12` 进行比较。         |
|   `v1(v1 > 6)`   |     提取 `v1` 中大于 `6` 的所有元素。     |
| `x(x==999) = 1`  | 用值 `1` 替换 `x` 中等于 `999` 的所有值。 |

 

## 编程

|                  示例                   |                             说明                             |
| :-------------------------------------: | :----------------------------------------------------------: |
| `if x > 0.5    y = 3 else    y = 4 end` | 如果 `x` 大于 `0.5`，则将 `y` 的值设置为 `3`。  否则，将 `y` 的值设置为 `4`。 |
|      `for c = 1:3    disp(c) end`       | 循环计数器 (`c`) 遍历 值 `1:3`（`1`、`2` 和 `3`）。  循环体显示 `c` 的每个值。 |

